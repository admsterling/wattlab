{"version":3,"sources":["webpack:///./src/components/lab/HelpViews/Student/components/StartQue.vue?0ac2","webpack:///src/components/lab/HelpViews/Student/components/StartQue.vue","webpack:///./src/components/lab/HelpViews/Student/components/StartQue.vue?005c","webpack:///./src/components/lab/HelpViews/Student/components/StartQue.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","_s","queLength","queTime","waiting","on","getHelp","quePosition","formattedElapsedTime","cancelHelp","_e","staticRenderFns","data","elapsedTime","timer","undefined","que","computed","date","setSeconds","utc","substr","indexOf","length","$socket","id","response","toString","methods","setInterval","lab_id","labCode","socketid","$store","dispatch","then","clearInterval","sockets","updateQue","startHelp","sendTo","reciever","privateChat","mounted","method","query","variables","component","VBtn","VCol","VContainer","VIcon","VRow"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,aAAa,KAAK,CAACF,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,MAAQ,SAAS,QAAU,WAAW,CAACN,EAAIO,GAAG,oBAAoBH,EAAG,OAAO,CAACI,YAAY,+BAA+B,CAACR,EAAIO,GAAGP,EAAIS,GAAGT,EAAIU,cAAcN,EAAG,MAAMJ,EAAIO,GAAG,wBAAwBH,EAAG,OAAO,CAACI,YAAY,+BAA+B,CAACR,EAAIO,GAAGP,EAAIS,GAAGT,EAAIW,eAAe,GAAGP,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,MAAQ,SAAS,QAAU,WAAW,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,QAAUN,EAAIY,QAAQ,SAAWZ,EAAIY,SAASC,GAAG,CAAC,MAAQb,EAAIc,UAAU,CAACd,EAAIO,GAAG,eAAe,IAAI,GAAIP,EAAW,QAAEI,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,MAAQ,SAAS,QAAU,WAAW,CAACN,EAAIO,GAAG,aAAaH,EAAG,OAAO,CAACI,YAAY,+BAA+B,CAACR,EAAIO,GAAGP,EAAIS,GAAGT,EAAIe,gBAAgBf,EAAIO,GAAG,gBAAgBH,EAAG,MAAMJ,EAAIO,GAAG,IAAIP,EAAIS,GAAGT,EAAIgB,uBAAuBZ,EAAG,MAAMA,EAAG,QAAQ,CAACI,YAAY,wBAAwBF,MAAM,CAAC,KAAO,IAAIO,GAAG,CAAC,MAAQb,EAAIiB,aAAa,CAACb,EAAG,SAAS,CAACI,YAAY,QAAQ,CAACR,EAAIO,GAAG,gBAAgBP,EAAIO,GAAG,YAAY,IAAI,IAAI,GAAGP,EAAIkB,MAAM,IAC9nCC,EAAkB,G,6ECoCtB,GACEC,KADF,WAEI,MAAO,CACLC,YAAa,EACbC,WAAOC,EACPX,SAAS,EACTY,IAAK,KAGTC,SAAU,OAAZ,OAAY,CAAZ,kBACA,gBACI,OAAJ,gBACI,QAAJ,iBACI,SAAJ,kBACI,YAAJ,qBACI,eAAJ,wBACI,WAAJ,uBAPA,IASIT,qBATJ,WAUM,IAAN,iBACMU,EAAKC,WAAW1B,KAAKoB,YAAc,KACnC,IAAN,kBACM,OAAOO,EAAIC,OAAOD,EAAIE,QAAQ,KAAO,EAAG,IAE1Cf,YAfJ,WAgBM,GAAId,KAAKuB,IAAIO,OAAS,EAAG,CACvB,IAAR,EACQ,OAAQ9B,KAAKuB,IAAIM,QAAQ7B,KAAK+B,QAAQC,KACpC,KAAK,EACHC,EAAW,MACX,MACF,KAAK,EACHA,EAAW,MACX,MACF,KAAK,EACHA,EAAW,MACX,MACF,QACEA,GAAYjC,KAAKuB,IAAIM,QAAQ7B,KAAK+B,QAAQC,IAAM,GAAGE,WAAa,KAEpE,OAAOD,EAET,OAAO,MAETxB,UAnCJ,WAoCM,OAAOT,KAAKuB,IAAIO,QAElBpB,QAtCJ,WAuCM,MAAO,UAGXyB,QAAS,CACPtB,QADJ,WACA,WACMb,KAAKW,SAAU,EACfX,KAAKqB,MAAQe,aAAY,WACvB,EAAR,mBACA,KACM,IAAN,GACQC,OAAQrC,KAAKqC,OACbC,QAAStC,KAAKsC,QACdC,SAAUvC,KAAK+B,QAAQC,IAEzBhC,KAAKwC,OAAOC,SAAS,kBAAkBC,MAAK,WAC1C,EAAR,8BAGI1B,WAfJ,WAeA,WACMhB,KAAKW,SAAU,EACf,IAAN,GACQ0B,OAAQrC,KAAKqC,OACbC,QAAStC,KAAKsC,QACdC,SAAUvC,KAAK+B,QAAQC,IAEzBhC,KAAKwC,OAAOC,SAAS,mBAAmBC,MAAK,WAC3C,EAAR,2BACQC,cAAc,EAAtB,OACQ,EAAR,mBAIEC,QAAS,CACPC,UAAW,SAAf,GACM7C,KAAKuB,IAAMJ,GAEb2B,UAAW,SAAf,cACM9C,KAAKwC,OAAOC,SAAS,yBAA0BtB,GAAMuB,MAAK,WACxD,IAAR,GACUK,OAAQ,EAAlB,wBACUC,SAAU,EAApB,WACUC,YAAa,EAAvB,aAEQ,EAAR,mCAIEC,QA/FF,WA+FA,WACI,IAAJ,iCACMC,OAAQ,OACRhC,KAAM,CACJiC,MAAO,sHAKPC,UAAW,CACThB,OAAQrC,KAAKqC,WAIvB,kBACM,EAAN,0BAEA,mBACM,GAAN,YACQ,EAAR,iCACQ,IAAR,iCACU,EAAV,0CAGQ,QAAR,4BC5J8Y,I,6FCO1YiB,EAAY,eACd,EACAxD,EACAoB,GACA,EACA,KACA,KACA,MAIa,aAAAoC,EAAiB,QAShC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,OAAA,KAAKC,aAAA,KAAWC,QAAA,KAAMC,OAAA","file":"js/chunk-2d0da6d8.fa4fd424.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"no-gutters\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"align\":\"center\",\"justify\":\"center\"}},[_vm._v(\" People in que: \"),_c('span',{staticClass:\"purple--text lighten-text-1\"},[_vm._v(_vm._s(_vm.queLength))]),_c('br'),_vm._v(\" Average Wait Time: \"),_c('span',{staticClass:\"purple--text lighten-text-1\"},[_vm._v(_vm._s(_vm.queTime))])])],1),_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"align\":\"center\",\"justify\":\"center\"}},[_c('v-btn',{attrs:{\"loading\":_vm.waiting,\"disabled\":_vm.waiting},on:{\"click\":_vm.getHelp}},[_vm._v(\"Get Help\")])],1)],1),(_vm.waiting)?_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"align\":\"center\",\"justify\":\"center\"}},[_vm._v(\" You are \"),_c('span',{staticClass:\"purple--text lighten-text-1\"},[_vm._v(_vm._s(_vm.quePosition))]),_vm._v(\" in the que \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.formattedElapsedTime)),_c('br'),_c('v-btn',{staticClass:\"deep-orange lighten-2\",attrs:{\"dark\":\"\"},on:{\"click\":_vm.cancelHelp}},[_c('v-icon',{staticClass:\"mr-1\"},[_vm._v(\"mdi-cancel\")]),_vm._v(\"Cancel \")],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container no-gutters>\r\n    <v-row>\r\n      <v-col cols=\"12\" align=\"center\" justify=\"center\">\r\n        People in que:\r\n        <span class=\"purple--text lighten-text-1\">{{ queLength }}</span\r\n        ><br />\r\n        Average Wait Time:\r\n        <span class=\"purple--text lighten-text-1\">{{ queTime }}</span>\r\n      </v-col>\r\n    </v-row>\r\n    <v-row>\r\n      <v-col cols=\"12\" align=\"center\" justify=\"center\">\r\n        <v-btn @click=\"getHelp\" :loading=\"waiting\" :disabled=\"waiting\"\r\n          >Get Help</v-btn\r\n        >\r\n      </v-col>\r\n    </v-row>\r\n    <v-row v-if=\"waiting\">\r\n      <v-col cols=\"12\" align=\"center\" justify=\"center\">\r\n        You are \r\n        <span class=\"purple--text lighten-text-1\">{{ quePosition }}</span>\r\n        in the que\r\n        <br />\r\n        {{ formattedElapsedTime }}<br />\r\n        <v-btn dark class=\"deep-orange lighten-2\" @click=\"cancelHelp\">\r\n          <v-icon class=\"mr-1\">mdi-cancel</v-icon>Cancel\r\n        </v-btn>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      elapsedTime: 0,\r\n      timer: undefined,\r\n      waiting: false,\r\n      que: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      lab_id: \"socket/lab_id\",\r\n      labCode: \"socket/labCode\",\r\n      username: \"socket/username\",\r\n      privateChat: \"socket/privateChat\",\r\n      gettingSupport: \"socket/gettingSupport\",\r\n      queWaiting: \"socket/queWaiting\",\r\n    }),\r\n    formattedElapsedTime() {\r\n      const date = new Date(null);\r\n      date.setSeconds(this.elapsedTime / 1000);\r\n      const utc = date.toUTCString();\r\n      return utc.substr(utc.indexOf(\":\") + 1, 5);\r\n    },\r\n    quePosition() {\r\n      if (this.que.length > 0) {\r\n        let response;\r\n        switch (this.que.indexOf(this.$socket.id)) {\r\n          case 0:\r\n            response = \"1st\";\r\n            break;\r\n          case 1:\r\n            response = \"2nd\";\r\n            break;\r\n          case 2:\r\n            response = \"3rd\";\r\n            break;\r\n          default:\r\n            response = (this.que.indexOf(this.$socket.id) + 1).toString() + \"th\";\r\n        }\r\n        return response;\r\n      }\r\n      return null;\r\n    },\r\n    queLength() {\r\n      return this.que.length;\r\n    },\r\n    queTime() {\r\n      return \"x:xx\";\r\n    },\r\n  },\r\n  methods: {\r\n    getHelp() {\r\n      this.waiting = true;\r\n      this.timer = setInterval(() => {\r\n        this.elapsedTime += 1000;\r\n      }, 1000);\r\n      const queData = {\r\n        lab_id: this.lab_id,\r\n        labCode: this.labCode,\r\n        socketid: this.$socket.id,\r\n      };\r\n      this.$store.dispatch(\"socket/joinQue\").then(() => {\r\n        this.$socket.emit(\"joinQue\", queData);\r\n      });\r\n    },\r\n    cancelHelp() {\r\n      this.waiting = false;\r\n      const queData = {\r\n        lab_id: this.lab_id,\r\n        labCode: this.labCode,\r\n        socketid: this.$socket.id,\r\n      };\r\n      this.$store.dispatch(\"socket/leaveQue\").then(() => {\r\n        this.$socket.emit(\"leaveQue\", queData);\r\n        clearInterval(this.timer);\r\n        this.elapsedTime = 0;\r\n      });\r\n    },\r\n  },\r\n  sockets: {\r\n    updateQue: function (data) {\r\n      this.que = data;\r\n    },\r\n    startHelp: function (data) {\r\n      this.$store.dispatch(\"socket/privateChatInfo\", data).then(() => {\r\n        const helperInfo = {\r\n          sendTo: this.gettingSupport.reciever,\r\n          reciever: this.$socket.id,\r\n          privateChat: this.privateChat,\r\n        };\r\n        this.$socket.emit(\"startHelper\", helperInfo);\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    axios(\"http://localhost:4000/graphql\", {\r\n      method: \"POST\",\r\n      data: {\r\n        query: `\r\n              query getQue($lab_id: ID!){\r\n                getQue(lab_id: $lab_id)\r\n              }\r\n            `,\r\n        variables: {\r\n          lab_id: this.lab_id,\r\n        },\r\n      },\r\n    })\r\n      .then((res) => {\r\n        this.que = res.data.data.getQue;\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          this.errorList = error.response.data.errors;\r\n          for (let i = 0; i < this.errorList.length; i++) {\r\n            this.$toast.error(this.errorList[i].message);\r\n          }\r\n        } else {\r\n          console.log(\"Error\", error.message);\r\n        }\r\n      });\r\n  },\r\n};\r\n</script>","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StartQue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StartQue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StartQue.vue?vue&type=template&id=17ad98cf&\"\nimport script from \"./StartQue.vue?vue&type=script&lang=js&\"\nexport * from \"./StartQue.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCol,VContainer,VIcon,VRow})\n"],"sourceRoot":""}