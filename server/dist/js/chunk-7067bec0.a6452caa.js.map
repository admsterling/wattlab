{"version":3,"sources":["webpack:///./src/components/lab/components/LabGCWindow.vue?8283","webpack:///./src/components/lab/components/LabGCWindow.vue?8e41","webpack:///src/components/lab/components/LabGCWindow.vue","webpack:///./src/components/lab/components/LabGCWindow.vue?47f4","webpack:///./src/components/lab/components/LabGCWindow.vue?7c37"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","_l","msg","i","key","sender","username","_v","_s","text","_f","createdAt","class","accountType","ref","messageSending","on","$event","type","indexOf","_k","keyCode","sendMessage","model","value","callback","$$v","message","expression","sendAlert","staticRenderFns","data","loadingOverlay","computed","sockets","newGroupMessage","$store","dispatch","then","newGroupAlert","$toast","info","options","methods","scrollToEnd","container","scrollTop","scrollHeight","length","error","method","query","variables","lab_id","mounted","component","VCol","VContainer","VRow","VSheet","VTextField"],"mappings":"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","file":"js/chunk-7067bec0.a6452caa.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabGCWindow.vue?vue&type=style&index=0&id=2ae0d70d&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-sheet',{staticClass:\"rounded border\",staticStyle:{\"overflow-y\":\"auto\",\"height\":\"calc(100vh - 300px)\"},attrs:{\"id\":\"chatWindow\",\"color\":\"grey lighten-4\"}},[_c('v-container',{attrs:{\"fluid\":\"\"}},_vm._l((_vm.messages),function(msg,i){return _c('v-row',{key:i,staticClass:\"my-2\",attrs:{\"align\":\"center\",\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[(msg.sender === _vm.username)?_c('div',{staticClass:\"wrapperRight\"},[_c('div',{staticClass:\"mx-2 text-bubble lighten-4 deep-orange\"},[_vm._v(\" \"+_vm._s(msg.text)+\" \")]),_c('div',{staticStyle:{\"white-space\":\"nowrap\",\"width\":\"215px\"}},[_c('span',{staticClass:\"ml-2 grey--text text--lighten-1\"},[_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(msg.createdAt,\"HH:MM\"))+\" \"),_c('span',{staticClass:\"text-lighten-2\",class:[\n                    msg.accountType === 'STUDENT' ? 'green--text' : '',\n                    msg.accountType === 'HELPER' ? 'orange--text' : '',\n                    msg.accountType === 'PROFESSOR' ? 'purple--text' : '' ]},[_vm._v(\"(\"+_vm._s(msg.accountType)+\")\")])]),_c('span',{staticClass:\"ml-2\"},[_vm._v(_vm._s(msg.sender)+\":\")])])]):_c('div',{staticClass:\"wrapperLeft\"},[_c('div',{staticStyle:{\"white-space\":\"nowrap\",\"width\":\"215px\"}},[_c('span',{staticClass:\"ml-2 grey--text text--lighten-1\"},[_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(msg.createdAt,\"HH:MM\"))+\" \"),_c('span',{staticClass:\"text-lighten-2\",class:[\n                    msg.accountType === 'STUDENT' ? 'green--text' : '',\n                    msg.accountType === 'HELPER' ? 'orange--text' : '',\n                    msg.accountType === 'PROFESSOR' ? 'purple--text' : '' ]},[_vm._v(\"(\"+_vm._s(msg.accountType)+\")\")])]),_c('span',{staticClass:\"ml-2\"},[_vm._v(_vm._s(msg.sender)+\":\")])]),_c('div',{staticClass:\"mx-2 text-bubble lighten-4 blue\"},[_vm._v(\" \"+_vm._s(msg.text)+\" \")])])])],1)}),1)],1),(_vm.accountType !== 'PROFESSOR')?_c('v-text-field',{ref:\"messageField\",staticClass:\"mt-2\",attrs:{\"label\":\"Message:\",\"type\":\"text\",\"no-details\":\"\",\"outlined\":\"\",\"append-icon\":\"mdi-send\",\"loading\":_vm.messageSending,\"disabled\":_vm.messageSending,\"hide-details\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage($event)},\"click:append\":_vm.sendMessage},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}):_c('v-text-field',{ref:\"messageField\",staticClass:\"mt-2\",attrs:{\"label\":\"Message:\",\"type\":\"text\",\"no-details\":\"\",\"outlined\":\"\",\"append-icon\":\"mdi-send\",\"append-outer-icon\":\"mdi-alert-circle\",\"loading\":_vm.messageSending,\"disabled\":_vm.messageSending,\"hide-details\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage($event)},\"click:append-outer\":_vm.sendAlert,\"click:append\":_vm.sendMessage},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <v-sheet\r\n      id=\"chatWindow\"\r\n      color=\"grey lighten-4\"\r\n      class=\"rounded border\"\r\n      style=\"overflow-y: auto; height: calc(100vh - 300px)\"\r\n    >\r\n      <v-container fluid>\r\n        <v-row\r\n          v-for=\"(msg, i) in messages\"\r\n          :key=\"i\"\r\n          class=\"my-2\"\r\n          align=\"center\"\r\n          no-gutters\r\n        >\r\n          <v-col cols=\"12\">\r\n            <div v-if=\"msg.sender === username\" class=\"wrapperRight\">\r\n              <div class=\"mx-2 text-bubble lighten-4 deep-orange\">\r\n                {{ msg.text }}\r\n              </div>\r\n              <div style=\"white-space: nowrap; width: 215px; !important\">\r\n                <span class=\"ml-2 grey--text text--lighten-1\">\r\n                  {{ msg.createdAt | moment(\"HH:MM\") }}\r\n                  <span\r\n                    class=\"text-lighten-2\"\r\n                    :class=\"[\r\n                      msg.accountType === 'STUDENT' ? 'green--text' : '',\r\n                      msg.accountType === 'HELPER' ? 'orange--text' : '',\r\n                      msg.accountType === 'PROFESSOR' ? 'purple--text' : '',\r\n                    ]\"\r\n                    >({{ msg.accountType }})</span\r\n                  >\r\n                </span>\r\n                <span class=\"ml-2\">{{ msg.sender }}:</span>\r\n              </div>\r\n            </div>\r\n            <div v-else class=\"wrapperLeft\">\r\n              <div style=\"white-space: nowrap; width: 215px; !important\">\r\n                <span class=\"ml-2 grey--text text--lighten-1\">\r\n                  {{ msg.createdAt | moment(\"HH:MM\") }}\r\n                  <span\r\n                    class=\"text-lighten-2\"\r\n                    :class=\"[\r\n                      msg.accountType === 'STUDENT' ? 'green--text' : '',\r\n                      msg.accountType === 'HELPER' ? 'orange--text' : '',\r\n                      msg.accountType === 'PROFESSOR' ? 'purple--text' : '',\r\n                    ]\"\r\n                    >({{ msg.accountType }})</span\r\n                  >\r\n                </span>\r\n                <span class=\"ml-2\">{{ msg.sender }}:</span>\r\n              </div>\r\n              <div class=\"mx-2 text-bubble lighten-4 blue\">\r\n                {{ msg.text }}\r\n              </div>\r\n            </div>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n    </v-sheet>\r\n    <v-text-field\r\n      v-if=\"accountType !== 'PROFESSOR'\"\r\n      v-model=\"message\"\r\n      ref=\"messageField\"\r\n      label=\"Message:\"\r\n      type=\"text\"\r\n      no-details\r\n      outlined\r\n      append-icon=\"mdi-send\"\r\n      @keyup.enter=\"sendMessage\"\r\n      @click:append=\"sendMessage\"\r\n      :loading=\"messageSending\"\r\n      :disabled=\"messageSending\"\r\n      hide-details\r\n      class=\"mt-2\"\r\n    />\r\n    <v-text-field\r\n      v-else\r\n      v-model=\"message\"\r\n      ref=\"messageField\"\r\n      label=\"Message:\"\r\n      type=\"text\"\r\n      no-details\r\n      outlined\r\n      append-icon=\"mdi-send\"\r\n      append-outer-icon=\"mdi-alert-circle\"\r\n      @keyup.enter=\"sendMessage\"\r\n      @click:append-outer=\"sendAlert\"\r\n      @click:append=\"sendMessage\"\r\n      :loading=\"messageSending\"\r\n      :disabled=\"messageSending\"\r\n      hide-details\r\n      class=\"mt-2\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      loadingOverlay: false,\r\n      message: \"\",\r\n      messageSending: false,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      messages: \"socket/messages\",\r\n      lab_id: \"socket/lab_id\",\r\n      labCode: \"socket/labCode\",\r\n      username: \"socket/username\",\r\n      accountType: \"socket/accountType\",\r\n    }),\r\n  },\r\n  sockets: {\r\n    newGroupMessage: function (data) {\r\n      this.$store.dispatch(\"socket/newGroupMessage\", data).then(() => {\r\n        this.scrollToEnd();\r\n      });\r\n    },\r\n    newGroupAlert: function (data) {\r\n      this.$toast.info(data.message, data.options);\r\n    },\r\n  },\r\n  methods: {\r\n    scrollToEnd() {\r\n      let container = this.$el.querySelector(\"#chatWindow\");\r\n      container.scrollTop = container.scrollHeight;\r\n    },\r\n    sendMessage() {\r\n      this.messageSending = true;\r\n      if (!this.message.length > 0) {\r\n        this.$toast.error(\"Please enter a message\");\r\n        this.messageSending = false;\r\n      } else {\r\n        axios(process.env.VUE_APP_ENDPOINT, {\r\n          method: \"POST\",\r\n          data: {\r\n            query: `\r\n              mutation createMessage($sender: String!, $accountType: accountType!, $text: String!, $lab_id: String!){\r\n                createMessage(messageInput: {\r\n                    sender: $sender\r\n                    accountType: $accountType\r\n                    text: $text\r\n                    lab_id: $lab_id\r\n                }) {\r\n                    sender\r\n                    accountType\r\n                    text\r\n                    createdAt\r\n                    labCode\r\n                }\r\n              }\r\n            `,\r\n            variables: {\r\n              sender: this.username,\r\n              accountType: this.accountType,\r\n              text: this.message,\r\n              lab_id: this.lab_id,\r\n            },\r\n          },\r\n        })\r\n          .then((res) => {\r\n            this.message = \"\";\r\n            const messageData = res.data.data.createMessage;\r\n            this.$socket.emit(\"newGroupMessage\", messageData);\r\n          })\r\n          .catch((error) => {\r\n            if (error.response) {\r\n              this.errorList = error.response.data.errors;\r\n              for (let i = 0; i < this.errorList.length; i++) {\r\n                this.$toast.error(this.errorList[i].message);\r\n              }\r\n            } else {\r\n              console.log(\"Error\", error.message);\r\n            }\r\n          })\r\n          .finally(() => {\r\n            this.messageSending = false;\r\n            this.$nextTick(() => this.$refs.messageField.focus());\r\n          });\r\n      }\r\n    },\r\n    async sendAlert() {\r\n      if (this.message.length > 0) {\r\n        this.messageSending = true;\r\n        const alert_data = {\r\n          labCode: this.labCode,\r\n          message: this.message,\r\n          options: {\r\n            position: \"top-right\",\r\n            timeout: false,\r\n            hideProgressBar: true,\r\n          },\r\n        };\r\n        const res = await this.$socket.emit(\"alertGroup\", alert_data);\r\n        if (res) {\r\n          this.message = \"\";\r\n          this.$toast.success(\"Alert was sent successfully\");\r\n        } else {\r\n          this.$toast.error(\"Unable to send alert\");\r\n        }\r\n        this.messageSending = false;\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.scrollToEnd();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.wrapperLeft {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.wrapperRight {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.wrapperRight:first-of-type > div:last-child {\r\n  order: -1;\r\n}\r\n\r\n.text-bubble {\r\n  border-radius: 20px;\r\n  max-width: 60%;\r\n  padding: 8px 15px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabGCWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LabGCWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LabGCWindow.vue?vue&type=template&id=2ae0d70d&scoped=true&\"\nimport script from \"./LabGCWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./LabGCWindow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LabGCWindow.vue?vue&type=style&index=0&id=2ae0d70d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ae0d70d\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCol,VContainer,VRow,VSheet,VTextField})\n"],"sourceRoot":""}