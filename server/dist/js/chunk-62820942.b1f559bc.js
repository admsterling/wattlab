(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62820942"],{"0bc6":function(e,t,s){},"8ce9":function(e,t,s){},b11c:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:""}},[s("v-row",[s("v-col",{attrs:{cols:"3"}},[s("v-card",[s("v-card-title",[e._v(" Last 10 Help History "),s("v-spacer"),s("v-btn",{attrs:{fab:"","x-small":"",color:"blue",dark:""},on:{click:e.fetchHistory}},[s("v-icon",[e._v("mdi-refresh")])],1)],1),s("v-divider"),s("v-card-text",{staticStyle:{height:"calc(100vh - 300px)","overflow-y":"auto"}},[this.history.length>0?s("div",[s("v-list",{attrs:{subheader:""}},[s("v-subheader",[e._v("Most Recent First")]),e._l(e.history,(function(t,a){return s("v-list-item",{key:a},[s("v-list-item-content",[s("v-list-item-title",[s("span",{staticClass:"purple--text"},[e._v(e._s(e.index(a))+".")]),e._v(" "+e._s(t)+"@hw.ac.uk ")])],1)],1)}))],2)],1):s("div",[e._v("No history...")])])],1)],1),s("v-col",{attrs:{cols:"6"}},[s("v-card",[s("v-card-title",[e._v(" Reply to Feedback "),s("v-spacer"),s("v-btn",{attrs:{fab:"","x-small":"",color:"blue",dark:""},on:{click:e.fetchFeedback}},[s("v-icon",[e._v("mdi-refresh")])],1)],1),s("v-divider"),s("v-card-text",{staticStyle:{height:"calc(100vh - 300px)","overflow-y":"auto"}},[e.feedback.length>0?s("v-list",{attrs:{subheader:""}},[s("v-subheader",[e._v("Found This Feedback:")]),e._l(e.feedback,(function(t){return s("v-list-item",{key:t._id},[s("v-sheet",{staticClass:"px-2 pt-2 ma-2 rounded-r-xl",attrs:{color:"blue lighten-4",elevation:"4",rounded:"",width:"100%"}},[s("v-container",{attrs:{fluid:"","no-gutters":""}},[s("v-row",{staticClass:"mb-2",attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-subtitle-1 font-italic",attrs:{cols:"11"}},[e._v(' "'+e._s(t.feedback)+'" ')]),s("v-col",{attrs:{cols:"1",align:"start",justify:"end"}},[s("v-btn",{attrs:{"x-small":"",outlined:"",fab:""},on:{click:function(s){return e.skipResponse(t._id)}}},[s("v-icon",[e._v("mdi-close")])],1)],1)],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"Response to feedback:","append-outer-icon":"mdi-send",dense:""},on:{"click:append-outer":function(s){return e.sendResponse(t._id)},keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendResponse(t._id)}},model:{value:t.response,callback:function(s){e.$set(t,"response",s)},expression:"item.response"}})],1)],1)],1),s("div",{staticClass:"mb-3"})],1)],1)}))],2):s("div",[e._v(" You currently have no feedback, try refresh? ")])],1)],1)],1),s("v-col",{attrs:{cols:"3"}},[s("v-card",[s("v-card-title",[e._v("Useful Links")]),s("v-divider"),s("v-card-text",{staticStyle:{height:"calc(100vh - 300px)","overflow-y":"auto"}},[this.usefulLinkTitles.length>0?s("div",[s("v-list",e._l(e.usefulLinkTitles,(function(t,a){return s("v-list-item",{key:a},[s("v-list-item-content",[s("v-list-item-title",[e._v(" - "),s("a",{attrs:{href:e.usefulLinkLinks[a],target:"_blank"}},[e._v(" "+e._s(t)+" ")])])],1)],1)})),1)],1):s("div",[e._v("No links...")])])],1)],1)],1)],1)},i=[],n=(s("c975"),s("d81d"),s("a434"),s("5530")),r=s("bc3a"),o=s.n(r),c=s("2f62"),l={data:function(){return{history:[],usefulLinkTitles:[],usefulLinkLinks:[],feedback:[],init:!0}},computed:Object(n["a"])({},Object(c["b"])({lab_id:"socket/lab_id",username:"socket/username",labCode:"socket/labCode"})),methods:{index:function(e){return e+1},fetchHistory:function(){var e=this;o()("https://watt-lab-api.herokuapp.com/graphql",{method:"POST",data:{query:"\n              query getHistory($lab_id: ID!, $staff: String!) {\n                getHistory(lab_id: $lab_id, staff: $staff)\n              }\n            ",variables:{lab_id:this.lab_id,staff:this.username}}}).then((function(t){e.history=t.data.data.getHistory,e.init||e.$toast.success("History Updated"),e.init=!1}))},fetchFeedback:function(){var e=this;o()("https://watt-lab-api.herokuapp.com/graphql",{method:"POST",data:{query:"\n              query getFeedback($lab_id: ID!, $staff: String!) {\n                getFeedback(lab_id: $lab_id, staff: $staff){\n                  _id\n                  feedback\n                }\n              }\n            ",variables:{lab_id:this.lab_id,staff:this.username}}}).then((function(t){e.feedback=t.data.data.getFeedback,e.feedback=e.feedback.map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{response:""})}))})).catch((function(t){if(t.response){e.errorList=t.response.data.errors;for(var s=0;s<e.errorList.length;s++)e.$toast.error(e.errorList[s].message)}else console.log("Error",t.message)}))},fetchLinks:function(){var e=this;o()("https://watt-lab-api.herokuapp.com/graphql",{method:"POST",data:{query:"\n              query getStaffLinks($code: String!) {\n                getStaffLinks(code: $code) {\n                  usefulLinkTitles\n                  usefulLinkLinks\n                }\n              }\n            ",variables:{code:this.labCode}}}).then((function(t){e.usefulLinkTitles=t.data.data.getStaffLinks.usefulLinkTitles,e.usefulLinkLinks=t.data.data.getStaffLinks.usefulLinkLinks})).catch((function(t){if(t.response){e.errorList=t.response.data.errors;for(var s=0;s<e.errorList.length;s++)e.$toast.error(e.errorList[s].message)}else console.log("Error",t.message)}))},sendResponse:function(e){var t=this,s=this.feedback.map((function(e){return e._id})).indexOf(e),a=this.feedback[s].response;!a.length>0?this.$toast.error("Please enter a response"):o()("https://watt-lab-api.herokuapp.com/graphql",{method:"POST",data:{query:"\n              mutation sendResponse($priv_id: ID!, $response: String!) {\n                sendResponse(priv_id: $priv_id, response: $response)\n              }\n            ",variables:{priv_id:e,response:a}}}).then((function(){t.feedback.splice(s,1),t.$toast.success("Response Sent")}))},skipResponse:function(e){var t=this,s=this.feedback.map((function(e){return e._id})).indexOf(e);o()("https://watt-lab-api.herokuapp.com/graphql",{method:"POST",data:{query:"\n              mutation sendResponse($priv_id: ID!, $response: String!) {\n                sendResponse(priv_id: $priv_id, response: $response)\n              }\n            ",variables:{priv_id:e,response:"null"}}}).then((function(){t.feedback.splice(s,1)}))}},mounted:function(){this.fetchHistory(),this.fetchLinks()}},d=l,u=s("2877"),v=s("6544"),f=s.n(v),h=s("8336"),p=s("b0af"),b=s("99d9"),k=s("62ad"),_=s("a523"),m=s("ce7e"),g=s("132d"),y=s("8860"),L=s("da13"),$=s("5d23"),x=s("0fd9"),S=s("8dd9"),w=s("2fa4"),C=s("e0c7"),O=s("8654"),V=Object(u["a"])(d,a,i,!1,null,null,null);t["default"]=V.exports;f()(V,{VBtn:h["a"],VCard:p["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:k["a"],VContainer:_["a"],VDivider:m["a"],VIcon:g["a"],VList:y["a"],VListItem:L["a"],VListItemContent:$["a"],VListItemTitle:$["c"],VRow:x["a"],VSheet:S["a"],VSpacer:w["a"],VSubheader:C["a"],VTextField:O["a"]})},ce7e:function(e,t,s){"use strict";var a=s("5530"),i=(s("8ce9"),s("7560"));t["a"]=i["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(e){var t;return this.$attrs.role&&"separator"!==this.$attrs.role||(t=this.vertical?"vertical":"horizontal"),e("hr",{class:Object(a["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(a["a"])({role:"separator","aria-orientation":t},this.$attrs),on:this.$listeners})}})},e0c7:function(e,t,s){"use strict";var a=s("5530"),i=(s("0bc6"),s("7560")),n=s("58df");t["a"]=Object(n["a"])(i["a"]).extend({name:"v-subheader",props:{inset:Boolean},render:function(e){return e("div",{staticClass:"v-subheader",class:Object(a["a"])({"v-subheader--inset":this.inset},this.themeClasses),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})}}]);
//# sourceMappingURL=chunk-62820942.b1f559bc.js.map