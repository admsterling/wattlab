(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12b32052"],{"1f4f":function(t,e,a){"use strict";a("a9e3");var s=a("5530"),i=(a("8b37"),a("80d2")),r=a("7560"),n=a("58df");e["a"]=Object(n["a"])(r["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(s["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(i["h"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},7140:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"no-gutters":""}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",align:"center",justify:"center"}},[a("v-card",[a("v-card-title",[a("div",{staticClass:"text-left"},[t._v(" People in queue: "),a("span",{staticClass:"purple--text lighten-text-1 my-2"},[t._v(" "+t._s(t.queLength)+" ")]),a("br"),t._v(" Avg. Wait Time: "),a("span",{staticClass:"purple--text lighten-text-1 ml-2"},[t._v(" "+t._s(t._f("mmss")(t.averageTime))+" ")])]),a("v-spacer"),a("div",["PROFESSOR"===this.accountType&&this.profOnlyQue?a("v-btn",{staticClass:"purple--text lighten-text-1 ma-2",attrs:{outlined:""},on:{click:t.helpProf}},[t._v(" Help Professor Only ")]):t._e(),a("v-btn",{staticClass:"purple--text lighten-text-1 ma-2",attrs:{outlined:""},on:{click:t.helpNext}},[t._v(" Help Next Student ")]),a("v-btn",{staticClass:"purple--text lighten-text-1 ma-2",attrs:{outlined:""},on:{click:t.markNext}},[t._v(" Mark Next Student ")])],1)],1),a("v-divider"),a("v-card-text",["PROFESSOR"===this.accountType&&this.profOnlyQue?a("v-simple-table",{staticStyle:{height:"calc(100vh - 370px)","overflow-y":"scroll"},attrs:{"fixed-header":"",scrollable:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left",staticStyle:{width:"107px"}},[t._v("Time Elapsed")]),a("th",{staticClass:"text-left",staticStyle:{width:"60px"}},[t._v("Type")]),a("th",{staticClass:"text-left",staticStyle:{width:"100px"}},[t._v("Professor Only")]),a("th",{staticClass:"text-left",staticStyle:{width:"20%"}},[t._v("Title")]),a("th",{staticClass:"text-left",staticStyle:{width:"100%"}},[t._v("Description")]),a("th",{staticClass:"text-left",staticStyle:{width:"180px"}})])]),a("tbody",t._l(t.que,(function(e,s){return a("tr",{key:s,class:{"blue-grey lighten-3":e.requireProf}},[a("td",[t._v(" "+t._s(t._f("momentAgo")(e.createdAt))+" ")]),a("td",[t._v(t._s(e.queType))]),a("td",[t._v(" "+t._s(e.requireProf?"Yes":"")+" ")]),a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.desc))]),a("td",[a("v-btn",{staticClass:"deep-orange lighten-2",attrs:{dark:"",loading:t.waiting,disabled:t.waiting},on:{click:function(e){return t.startHelp(s)}}},[t._v("Help Student ")])],1)])})),0)]):a("v-simple-table",{staticStyle:{height:"calc(100vh - 370px)","overflow-y":"scroll"},attrs:{"fixed-header":"",scrollable:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left",staticStyle:{width:"107px"}},[t._v("Time Elapsed")]),a("th",{staticClass:"text-left",staticStyle:{width:"60px"}},[t._v("Type")]),a("th",{staticClass:"text-left",staticStyle:{width:"20%"}},[t._v("Title")]),a("th",{staticClass:"text-left",staticStyle:{width:"100%"}},[t._v("Description")]),a("th",{staticClass:"text-left",staticStyle:{width:"180px"}})])]),a("tbody",t._l(t.helperQue,(function(e,s){return a("tr",{key:s},[a("td",[t._v(" "+t._s(t._f("momentAgo")(e.createdAt))+" ")]),a("td",[t._v(t._s(e.queType))]),a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.desc))]),a("td",[a("v-btn",{staticClass:"deep-orange lighten-2",attrs:{dark:"",loading:t.waiting,disabled:t.waiting},on:{click:function(e){return t.startHelp(s)}}},[t._v(t._s(t.buttonText(e.queType))+" ")])],1)])})),0)])],1)],1)],1)],1)],1)},i=[],r=(a("4de4"),a("c975"),a("d81d"),a("96cf"),a("1da1")),n=a("5530"),l=a("bc3a"),o=a.n(l),c=a("2f62"),d={data:function(){return{waiting:!1,headers:[{text:"Title",value:"title"},{text:"Description",value:"description"},{text:"Help Student"}],que:[],averageTime:0,now:Date.now()}},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])({lab_id:"socket/lab_id",labCode:"socket/labCode",username:"socket/username",accountType:"socket/accountType",profOnlyQue:"socket/profOnlyQue"})),{},{queLength:function(){return"HELPER"===this.accountType?this.helperQue.length:this.que.length},helperQue:function(){return this.que.filter((function(t){return!t.requireProf}))}}),methods:{startHelp:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.waiting=!0,s=e.que[t],i={sendTo:s.socketid,reciever:e.$socket.id,staff:e.username,lab_id:e.lab_id,labCode:e.labCode,socketid:s.socketid,timeDiff:Date.now()-Date.parse(s.createdAt)},e.$socket.emit("startHelp",i),e.waiting=!1;case 5:case"end":return a.stop()}}),a)})))()},helpNext:function(){var t=this.helperQue;"PROFESSOR"===this.accountType&&(t=this.que);var e=t.map((function(t){return t.queType})).indexOf("Help");-1!=e?this.startHelp(e):this.$toast.error("No students need help")},markNext:function(){var t=this.helperQue;"PROFESSOR"===this.accountType&&(t=this.que);var e=t.map((function(t){return t.queType})).indexOf("Marking");-1!=e?this.startHelp(e):this.$toast.error("No students need marking")},helpProf:function(){var t=this.que,e=t.map((function(t){return t.requireProf})).indexOf(!0);console.log(e),-1!=e?this.startHelp(e):this.$toast.error("No Students request professor only help")},buttonText:function(t){return"Help"===t?"Help Student":"Mark Student"}},sockets:{updateQue:function(t){this.que=t.que,this.averageTime=t.averageTime},startHelper:function(t){this.$store.dispatch("socket/setprivateChatInfo",t)}},mounted:function(){var t=this;this.interval=setInterval((function(){t.$forceUpdate()}),1e3),o()("https://watt-lab-api.herokuapp.com/graphql",{method:"POST",data:{query:"\n              query getQue($lab_id: ID!){\n                getQue(lab_id: $lab_id){\n                  que {\n                    socketid\n                    queType\n                    title\n                    desc\n                    createdAt\n                    requireProf\n                  }\n                  averageTime\n                }\n              }\n            ",variables:{lab_id:this.lab_id}}}).then((function(e){t.que=e.data.data.getQue.que,t.averageTime=e.data.data.getQue.averageTime})).catch((function(e){if(e.response){t.errorList=e.response.data.errors;for(var a=0;a<t.errorList.length;a++)t.$toast.error(t.errorList[a].message)}else console.log("Error",e.message)}))},beforeDestroy:function(){clearInterval(this.interval)}},u=d,h=a("2877"),p=a("6544"),v=a.n(p),f=a("8336"),b=a("b0af"),g=a("99d9"),m=a("62ad"),x=a("a523"),_=a("ce7e"),y=a("0fd9"),w=a("1f4f"),T=a("2fa4"),k=Object(h["a"])(u,s,i,!1,null,null,null);e["default"]=k.exports;v()(k,{VBtn:f["a"],VCard:b["a"],VCardText:g["c"],VCardTitle:g["d"],VCol:m["a"],VContainer:x["a"],VDivider:_["a"],VRow:y["a"],VSimpleTable:w["a"],VSpacer:T["a"]})},"8b37":function(t,e,a){},"8ce9":function(t,e,a){},ce7e:function(t,e,a){"use strict";var s=a("5530"),i=(a("8ce9"),a("7560"));e["a"]=i["a"].extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render:function(t){var e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:Object(s["a"])({"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical},this.themeClasses),attrs:Object(s["a"])({role:"separator","aria-orientation":e},this.$attrs),on:this.$listeners})}})}}]);
//# sourceMappingURL=chunk-12b32052.925c1d4e.js.map